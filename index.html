<html><script src="https://d3js.org/d3.v5.js"></script>
<title>US Road Traffic Mortality</title>


<body onload='init()'>
    <h1>US Road Traffic Mortality</h1>
<p>Amanda Wang</p>
<p>July 23, 2021</p>
<h2>Introduction</h2>
<p>INSERT PAGE 1 TEXT</p>
    <svg width=1000 height=1500></svg>
<div id="tooltip"></div>
<script>
async function init() {

  const data=await d3.csv('https://awang288.github.io/raw_data/US_data.csv');

  var width=750;
  var height=750;
  var margin=100;

  var xs=d3.scaleLinear().domain([1999,2021]).range([0,width]);
  var ys=d3.scaleLinear().domain([11,16.5]).range([height,0]);
  var x=d3.scaleLinear().domain([1999,2021]).range([0,width]);
  var y=d3.scaleLinear().domain([11,16.5]).range([height,0]);
  var tooltip=d3.select("#tooltip").append("div")
          .style("opacity",0)
          .attr("class","tooltip")
          .style("background-color","white")
          .style("border","solid")
          .style("border-width","2px")
          .style("border-radius","5px")
          .style("padding","5px")
          .style("position","absolute")
  var xTickLabels=["2000","2005","2010","2015","2020"]
  //Line
d3.select("svg")
  .attr("width",width+2*margin)
  .attr("height",height+2*margin)
  .append("g")
  .attr("transform","translate("+margin+","+margin+")")
  .selectAll("body").data(data).enter().append("path")
  .datum(data)
  .attr("fill","none")
  .attr("stroke", "skyblue")
  .attr("stroke-width", 1.5)
  .attr("d", d3.line()
    .x(function(d) { return x(d.Year) })
    .y(function(d) { return y(d.Value) })
    )
    //Main graph
d3.select("svg")
  .attr("width",width+2*margin)
  .attr("height",height+2*margin)
  .append("g")
  .attr("transform","translate("+margin+","+margin+")")
  .selectAll("body").data(data).enter().append("circle")
  .attr("cx",function(d) {return xs(d.Year);})
  .attr("cy",function(d) {return ys(d.Value);})
  .attr("r",function(d) {return 8;})
  .attr("fill",d3.color("blue"))
  .on("mouseover", function(d) {tooltip.style("opacity", 1);})
  .on("mousemove",function(d) {tooltip.html("Year: "+d.Year
        +"<br>Number of Fatalities: "+d.Value+"<br>% of Deaths-Female: "+d.Female
        +"%<br>% of Deaths-Male: "+d.Male+"%")
                .style("top", (event.pageY)-105+"px")
                .style("left",(event.pageX)-60+"px");
      })
  .on("mouseleave", function(d) { tooltip.style("opacity", 0);})

d3.select("svg").append("g")
  .attr("transform","translate("+margin+","+margin+")")
  .call(d3.axisLeft(y));

  d3.select("svg").append("g")
  .attr("transform","translate("+margin+","+(height+margin)+")")
  .call(d3.axisBottom(x).ticks(5).tickValues([2000,2005,2010,2015,2020])
  .tickFormat(function (d,i) {return xTickLabels[i]}))


// Axes Labels
  d3.select("svg").append("text")
    .attr("transform","translate("+(width/2+100)+","+(height+margin+50)+")")
    .style("text-anchor","middle")
    .text("Year");
  d3.select("svg").append("text")
    .attr("transform","rotate(-90)")
    .attr("y", 0-margin.left)
    .attr("x",-50-(height/2))
    .attr("dy","1em")
    .style("text-anchor","middle")
    .text("Number of Traffic-Related Fatalities per 100,000 population");
// Title
  d3.select("svg").append("text")
  .attr("x",(width/2-100))
  .attr("y",margin/2)
  .attr("text-anchor","center")
  .attr("font-weight",600)
  .style("font-size","24px")
  .text("Traffic-Related Fatalities in the United States");
}

</script>
<p>INSERT PAGE 1 TEXT</p>
<p>
<input type="button" onclick="location.href='est_road_deaths.html';" value="Next" />
</p>
</body>
</html>